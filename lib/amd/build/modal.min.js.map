<<<<<<< HEAD
{"version":3,"sources":["../src/modal.js"],"names":["define","$","Templates","Notification","KeyCodes","CustomEvents","ModalBackdrop","Event","ModalEvents","FocusLock","Pending","SELECTORS","CONTAINER","MODAL","HEADER","TITLE","BODY","FOOTER","HIDE","DIALOG","FORM","MENU_BAR","HAS_Z_INDEX","CAN_RECEIVE_FOCUS","TEMPLATES","LOADING","BACKDROP","backdropPromise","modalCounter","Modal","root","modal","find","header","title","body","footer","hiddenSiblings","isAttached","bodyJS","footerJS","modalCount","is","exception","message","length","registerEventListeners","prototype","attachToDOM","append","trapFocus","runTemplateJS","countOtherVisibleModals","count","each","index","element","hasClass","bind","getBackdrop","render","then","html","fail","getRoot","getModal","getTitle","getBody","getFooter","getModalCount","setTitle","value","asyncSet","setBody","notifyFilterContentUpdated","trigger","bodyRendered","jsPendingId","M","util","js_pending","contentPromise","css","state","height","innerHeight","animate","loadingIcon","hide","fadeIn","when","promise","fadeOut","js","result","isVisible","currentHeight","newHeight","opacity","duration","queue","always","js_complete","setFooter","showFooter","done","hasFooterContent","children","hideFooter","addClass","removeClass","setLarge","isLarge","setSmall","isSmall","calculateZIndex","items","zIndex","parseInt","item","itemZIndex","hasFocus","target","document","activeElement","has","hasTransitions","show","pendingPromise","backdrop","currentIndex","newIndex","setZIndex","accessibilityShow","focus","shown","resolve","hideIfNotForm","formElement","untrapFocus","accessibilityHide","one","hidden","destroy","remove","destroyed","child","attr","data","push","sibling","previousValue","removeAttr","on","e","keyCode","escape","click","closest","events","activate","originalEvent","preventDefault","setFunction","p","hasOwnProperty","Deferred","content"],"mappings":"yQAwBAA,OAAM,cAAC,CACH,QADG,CAEH,gBAFG,CAGH,mBAHG,CAIH,gBAJG,CAKH,gCALG,CAMH,qBANG,CAOH,YAPG,CAQH,mBARG,CASH,2BATG,CAUH,cAVG,CAAD,CAWH,SAASC,CAAT,CAAYC,CAAZ,CAAuBC,CAAvB,CAAqCC,CAArC,CAA+CC,CAA/C,CAA6DC,CAA7D,CAA4EC,CAA5E,CAAmFC,CAAnF,CAAgGC,CAAhG,CAA2GC,CAA3G,CAAoH,IAE/GC,CAAAA,CAAS,CAAG,CACZC,SAAS,CAAE,mCADC,CAEZC,KAAK,CAAE,yBAFK,CAGZC,MAAM,CAAE,0BAHI,CAIZC,KAAK,CAAE,yBAJK,CAKZC,IAAI,CAAE,wBALM,CAMZC,MAAM,CAAE,0BANI,CAOZC,IAAI,CAAE,wBAPM,CAQZC,MAAM,CAAE,eARI,CASZC,IAAI,CAAE,MATM,CAUZC,QAAQ,CAAE,gBAVE,CAWZC,WAAW,CAAE,oBAXD,CAYZC,iBAAiB,CAAE,6EAZP,CAFmG,CAiB/GC,CAAS,CAAG,CACZC,OAAO,CAAE,cADG,CAEZC,QAAQ,CAAE,qBAFE,CAjBmG,CAyB/GC,CAzB+G,CA+B/GC,CAAY,CAAG,CA/BgG,CAsC/GC,CAAK,CAAG,SAASC,CAAT,CAAe,CACvB,KAAKA,IAAL,CAAY7B,CAAC,CAAC6B,CAAD,CAAb,CACA,KAAKC,KAAL,CAAa,KAAKD,IAAL,CAAUE,IAAV,CAAerB,CAAS,CAACE,KAAzB,CAAb,CACA,KAAKoB,MAAL,CAAc,KAAKF,KAAL,CAAWC,IAAX,CAAgBrB,CAAS,CAACG,MAA1B,CAAd,CACA,KAAKoB,KAAL,CAAa,KAAKD,MAAL,CAAYD,IAAZ,CAAiBrB,CAAS,CAACI,KAA3B,CAAb,CACA,KAAKoB,IAAL,CAAY,KAAKJ,KAAL,CAAWC,IAAX,CAAgBrB,CAAS,CAACK,IAA1B,CAAZ,CACA,KAAKoB,MAAL,CAAc,KAAKL,KAAL,CAAWC,IAAX,CAAgBrB,CAAS,CAACM,MAA1B,CAAd,CACA,KAAKoB,cAAL,CAAsB,EAAtB,CACA,KAAKC,UAAL,IACA,KAAKC,MAAL,CAAc,IAAd,CACA,KAAKC,QAAL,CAAgB,IAAhB,CACA,KAAKC,UAAL,CAAkBb,CAAY,EAA9B,CAEA,GAAI,CAAC,KAAKE,IAAL,CAAUY,EAAV,CAAa/B,CAAS,CAACC,SAAvB,CAAL,CAAwC,CACpCT,CAAY,CAACwC,SAAb,CAAuB,CAACC,OAAO,CAAE,kCAAV,CAAvB,CACH,CAED,GAAI,CAAC,KAAKb,KAAL,CAAWc,MAAhB,CAAwB,CACpB1C,CAAY,CAACwC,SAAb,CAAuB,CAACC,OAAO,CAAE,oCAAV,CAAvB,CACH,CAED,GAAI,CAAC,KAAKX,MAAL,CAAYY,MAAjB,CAAyB,CACrB1C,CAAY,CAACwC,SAAb,CAAuB,CAACC,OAAO,CAAE,kCAAV,CAAvB,CACH,CAED,GAAI,CAAC,KAAKV,KAAL,CAAWW,MAAhB,CAAwB,CACpB1C,CAAY,CAACwC,SAAb,CAAuB,CAACC,OAAO,CAAE,wCAAV,CAAvB,CACH,CAED,GAAI,CAAC,KAAKT,IAAL,CAAUU,MAAf,CAAuB,CACnB1C,CAAY,CAACwC,SAAb,CAAuB,CAACC,OAAO,CAAE,gCAAV,CAAvB,CACH,CAED,GAAI,CAAC,KAAKR,MAAL,CAAYS,MAAjB,CAAyB,CACrB1C,CAAY,CAACwC,SAAb,CAAuB,CAACC,OAAO,CAAE,kCAAV,CAAvB,CACH,CAED,KAAKE,sBAAL,EACH,CA5EkH,CAoFnHjB,CAAK,CAACkB,SAAN,CAAgBC,WAAhB,CAA8B,UAAW,CACrC,GAAI,KAAKV,UAAT,CAAqB,CACjB,MACH,CAEDrC,CAAC,CAAC,MAAD,CAAD,CAAUgD,MAAV,CAAiB,KAAKnB,IAAtB,EACArB,CAAS,CAACyC,SAAV,CAAoB,KAAKpB,IAAL,CAAU,CAAV,CAApB,EAIA,GAAI,KAAKS,MAAT,CAAiB,CACbrC,CAAS,CAACiD,aAAV,CAAwB,KAAKZ,MAA7B,EACA,KAAKA,MAAL,CAAc,IACjB,CAED,GAAI,KAAKC,QAAT,CAAmB,CACftC,CAAS,CAACiD,aAAV,CAAwB,KAAKX,QAA7B,EACA,KAAKA,QAAL,CAAgB,IACnB,CAED,KAAKF,UAAL,GACH,CArBD,CA6BAT,CAAK,CAACkB,SAAN,CAAgBK,uBAAhB,CAA0C,UAAW,CACjD,GAAIC,CAAAA,CAAK,CAAG,CAAZ,CACApD,CAAC,CAAC,MAAD,CAAD,CAAU+B,IAAV,CAAerB,CAAS,CAACC,SAAzB,EAAoC0C,IAApC,CAAyC,SAASC,CAAT,CAAgBC,CAAhB,CAAyB,CAC9DA,CAAO,CAAGvD,CAAC,CAACuD,CAAD,CAAX,CAGA,GAAI,CAAC,KAAK1B,IAAL,CAAUY,EAAV,CAAac,CAAb,CAAD,EAA0BA,CAAO,CAACC,QAAR,CAAiB,MAAjB,CAA9B,CAAwD,CACpDJ,CAAK,EACR,CACJ,CAPwC,CAOvCK,IAPuC,CAOlC,IAPkC,CAAzC,EASA,MAAOL,CAAAA,CACV,CAZD,CAoBAxB,CAAK,CAACkB,SAAN,CAAgBY,WAAhB,CAA8B,UAAW,CACrC,GAAI,CAAChC,CAAL,CAAsB,CAClBA,CAAe,CAAGzB,CAAS,CAAC0D,MAAV,CAAiBpC,CAAS,CAACE,QAA3B,CAAqC,EAArC,EACbmC,IADa,CACR,SAASC,CAAT,CAAe,CACjB,GAAIN,CAAAA,CAAO,CAAGvD,CAAC,CAAC6D,CAAD,CAAf,CAEA,MAAO,IAAIxD,CAAAA,CAAJ,CAAkBkD,CAAlB,CACV,CALa,EAMbO,IANa,CAMR5D,CAAY,CAACwC,SANL,CAOrB,CAED,MAAOhB,CAAAA,CACV,CAZD,CAoBAE,CAAK,CAACkB,SAAN,CAAgBiB,OAAhB,CAA0B,UAAW,CACjC,MAAO,MAAKlC,IACf,CAFD,CAUAD,CAAK,CAACkB,SAAN,CAAgBkB,QAAhB,CAA2B,UAAW,CAClC,MAAO,MAAKlC,KACf,CAFD,CAUAF,CAAK,CAACkB,SAAN,CAAgBmB,QAAhB,CAA2B,UAAW,CAClC,MAAO,MAAKhC,KACf,CAFD,CAUAL,CAAK,CAACkB,SAAN,CAAgBoB,OAAhB,CAA0B,UAAW,CACjC,MAAO,MAAKhC,IACf,CAFD,CAUAN,CAAK,CAACkB,SAAN,CAAgBqB,SAAhB,CAA4B,UAAW,CACnC,MAAO,MAAKhC,MACf,CAFD,CAUAP,CAAK,CAACkB,SAAN,CAAgBsB,aAAhB,CAAgC,UAAW,CACvC,MAAO,MAAK5B,UACf,CAFD,CAaAZ,CAAK,CAACkB,SAAN,CAAgBuB,QAAhB,CAA2B,SAASC,CAAT,CAAgB,CACvC,GAAIrC,CAAAA,CAAK,CAAG,KAAKgC,QAAL,EAAZ,CAEA,KAAKM,QAAL,CAAcD,CAAd,CAAqBrC,CAAK,CAAC4B,IAAN,CAAWJ,IAAX,CAAgBxB,CAAhB,CAArB,CACH,CAJD,CAeAL,CAAK,CAACkB,SAAN,CAAgB0B,OAAhB,CAA0B,SAASF,CAAT,CAAgB,CACtC,GAAIpC,CAAAA,CAAI,CAAG,KAAKgC,OAAL,EAAX,CAEA,GAAqB,QAAjB,QAAOI,CAAAA,CAAX,CAA+B,CAE3BpC,CAAI,CAAC2B,IAAL,CAAUS,CAAV,EACAhE,CAAK,CAACmE,0BAAN,CAAiCvC,CAAjC,EACA,KAAK6B,OAAL,GAAeW,OAAf,CAAuBnE,CAAW,CAACoE,YAAnC,CAAiD,IAAjD,CACH,CALD,IAKO,CACH,GAAIC,CAAAA,CAAW,CAAG,2BAA6B,KAAKR,aAAL,EAA/C,CACAS,CAAC,CAACC,IAAF,CAAOC,UAAP,CAAkBH,CAAlB,EAGA,GAAII,CAAAA,CAAc,CAAG,IAArB,CACA9C,CAAI,CAAC+C,GAAL,CAAS,UAAT,CAAqB,QAArB,EAEA,GAAqB,SAAjB,EAAAX,CAAK,CAACY,KAAN,EAAJ,CAAgC,CAG5B,GAAIC,CAAAA,CAAM,CAAGjD,CAAI,CAACkD,WAAL,EAAb,CACA,GAAa,GAAT,CAAAD,CAAJ,CAAkB,CACdA,CAAM,CAAG,GACZ,CAEDjD,CAAI,CAACmD,OAAL,CAAa,CAACF,MAAM,CAAEA,CAAM,CAAG,IAAlB,CAAb,CAAsC,GAAtC,EAEAjD,CAAI,CAAC2B,IAAL,CAAU,EAAV,EACAmB,CAAc,CAAG/E,CAAS,CAAC0D,MAAV,CAAiBpC,CAAS,CAACC,OAA3B,CAAoC,EAApC,EACZoC,IADY,CACP,SAASC,CAAT,CAAe,CACjB,GAAIyB,CAAAA,CAAW,CAAGtF,CAAC,CAAC6D,CAAD,CAAD,CAAQ0B,IAAR,EAAlB,CACArD,CAAI,CAAC2B,IAAL,CAAUyB,CAAV,EACAA,CAAW,CAACE,MAAZ,CAAmB,GAAnB,EAKA,MAAOxF,CAAAA,CAAC,CAACyF,IAAF,CAAOH,CAAW,CAACI,OAAZ,EAAP,CAA8BpB,CAA9B,CACV,CAVY,EAWZV,IAXY,CAWP,SAAS0B,CAAT,CAAsB,CAIxB,MAAOA,CAAAA,CAAW,CAACK,OAAZ,CAAoB,GAApB,EAAyBD,OAAzB,EACV,CAhBY,EAiBZ9B,IAjBY,CAiBP,UAAW,CACb,MAAOU,CAAAA,CACV,CAnBY,CAoBpB,CA/BD,IA+BO,CAGHU,CAAc,CAAGV,CACpB,CAGDU,CAAc,CAACpB,IAAf,CAAoB,SAASC,CAAT,CAAe+B,CAAf,CAAmB,CACnC,GAAIC,CAAAA,CAAM,CAAG,IAAb,CAEA,GAAI,KAAKC,SAAL,EAAJ,CAAsB,CAGlB5D,CAAI,CAAC+C,GAAL,CAAS,SAAT,CAAoB,CAApB,EACA,GAAIc,CAAAA,CAAa,CAAG7D,CAAI,CAACkD,WAAL,EAApB,CACAlD,CAAI,CAAC2B,IAAL,CAAUA,CAAV,EAKA3B,CAAI,CAAC+C,GAAL,CAAS,QAAT,CAAmB,EAAnB,EACA,GAAIe,CAAAA,CAAS,CAAG9D,CAAI,CAACkD,WAAL,EAAhB,CACAlD,CAAI,CAAC+C,GAAL,CAAS,QAAT,CAAmBc,CAAa,CAAG,IAAnC,EACAF,CAAM,CAAG3D,CAAI,CAACmD,OAAL,CACL,CAACF,MAAM,CAAEa,CAAS,CAAG,IAArB,CAA2BC,OAAO,CAAE,CAApC,CADK,CAEL,CAACC,QAAQ,CAAE,GAAX,CAAgBC,KAAK,GAArB,CAFK,EAGPT,OAHO,EAIZ,CAjBD,IAiBO,CAGHxD,CAAI,CAAC2B,IAAL,CAAUA,CAAV,CACH,CAED,GAAI+B,CAAJ,CAAQ,CACJ,GAAI,KAAKvD,UAAT,CAAqB,CAEjBpC,CAAS,CAACiD,aAAV,CAAwB0C,CAAxB,CACH,CAHD,IAGO,CAEH,KAAKtD,MAAL,CAAcsD,CACjB,CACJ,CAED,MAAOC,CAAAA,CACV,CArCmB,CAqClBpC,IArCkB,CAqCb,IArCa,CAApB,EAsCCG,IAtCD,CAsCM,SAASiC,CAAT,CAAiB,CACnBvF,CAAK,CAACmE,0BAAN,CAAiCvC,CAAjC,EACA,KAAK6B,OAAL,GAAeW,OAAf,CAAuBnE,CAAW,CAACoE,YAAnC,CAAiD,IAAjD,EACA,MAAOkB,CAAAA,CACV,CAJK,CAIJpC,IAJI,CAIC,IAJD,CAtCN,EA2CCK,IA3CD,CA2CM5D,CAAY,CAACwC,SA3CnB,EA4CC0D,MA5CD,CA4CQ,UAAW,CAGflE,CAAI,CAAC+C,GAAL,CAAS,QAAT,CAAmB,EAAnB,EACA/C,CAAI,CAAC+C,GAAL,CAAS,UAAT,CAAqB,EAArB,EACA/C,CAAI,CAAC+C,GAAL,CAAS,SAAT,CAAoB,EAApB,EACAJ,CAAC,CAACC,IAAF,CAAOuB,WAAP,CAAmBzB,CAAnB,CAGH,CArDD,EAsDCd,IAtDD,CAsDM5D,CAAY,CAACwC,SAtDnB,CAuDH,CACJ,CA9GD,CA2HAd,CAAK,CAACkB,SAAN,CAAgBwD,SAAhB,CAA4B,SAAShC,CAAT,CAAgB,CAExC,KAAKiC,UAAL,GAEA,GAAIpE,CAAAA,CAAM,CAAG,KAAKgC,SAAL,EAAb,CAEA,GAAqB,QAAjB,QAAOG,CAAAA,CAAX,CAA+B,CAE3BnC,CAAM,CAAC0B,IAAP,CAAYS,CAAZ,CACH,CAHD,IAGO,CAGHrE,CAAS,CAAC0D,MAAV,CAAiBpC,CAAS,CAACC,OAA3B,CAAoC,EAApC,EAAwCgF,IAAxC,CAA6C,SAAS3C,CAAT,CAAe,CACxD1B,CAAM,CAAC0B,IAAP,CAAYA,CAAZ,EAEAS,CAAK,CAACkC,IAAN,CAAW,SAAS3C,CAAT,CAAe+B,CAAf,CAAmB,CAC1BzD,CAAM,CAAC0B,IAAP,CAAYA,CAAZ,EAEA,GAAI+B,CAAJ,CAAQ,CACJ,GAAI,KAAKvD,UAAT,CAAqB,CAEjBpC,CAAS,CAACiD,aAAV,CAAwB0C,CAAxB,CACH,CAHD,IAGO,CAEH,KAAKrD,QAAL,CAAgBqD,CACnB,CACJ,CACJ,CAZU,CAYTnC,IAZS,CAYJ,IAZI,CAAX,CAaH,CAhB4C,CAgB3CA,IAhB2C,CAgBtC,IAhBsC,CAA7C,CAiBH,CACJ,CA9BD,CAsCA7B,CAAK,CAACkB,SAAN,CAAgB2D,gBAAhB,CAAmC,UAAW,CAC1C,MAAO,MAAKtC,SAAL,GAAiBuC,QAAjB,GAA4B9D,MAA5B,MACV,CAFD,CASAhB,CAAK,CAACkB,SAAN,CAAgB6D,UAAhB,CAA6B,UAAW,CACpC,KAAKxC,SAAL,GAAiByC,QAAjB,CAA0B,QAA1B,CACH,CAFD,CASAhF,CAAK,CAACkB,SAAN,CAAgByD,UAAhB,CAA6B,UAAW,CACpC,KAAKpC,SAAL,GAAiB0C,WAAjB,CAA6B,QAA7B,CACH,CAFD,CASAjF,CAAK,CAACkB,SAAN,CAAgBgE,QAAhB,CAA2B,UAAW,CAClC,GAAI,KAAKC,OAAL,EAAJ,CAAoB,CAChB,MACH,CAED,KAAK/C,QAAL,GAAgB4C,QAAhB,CAAyB,UAAzB,CACH,CAND,CAcAhF,CAAK,CAACkB,SAAN,CAAgBiE,OAAhB,CAA0B,UAAW,CACjC,MAAO,MAAK/C,QAAL,GAAgBR,QAAhB,CAAyB,UAAzB,CACV,CAFD,CASA5B,CAAK,CAACkB,SAAN,CAAgBkE,QAAhB,CAA2B,UAAW,CAClC,GAAI,KAAKC,OAAL,EAAJ,CAAoB,CAChB,MACH,CAED,KAAKjD,QAAL,GAAgB6C,WAAhB,CAA4B,UAA5B,CACH,CAND,CAcAjF,CAAK,CAACkB,SAAN,CAAgBmE,OAAhB,CAA0B,UAAW,CACjC,MAAO,CAAC,KAAKjD,QAAL,GAAgBR,QAAhB,CAAyB,UAAzB,CACX,CAFD,CAUA5B,CAAK,CAACkB,SAAN,CAAgBoE,eAAhB,CAAkC,UAAW,IACrCC,CAAAA,CAAK,CAAGnH,CAAC,CAACU,CAAS,CAACQ,MAAV,CAAmB,IAAnB,CAA0BR,CAAS,CAACU,QAApC,CAA+C,IAA/C,CAAsDV,CAAS,CAACW,WAAjE,CAD4B,CAErC+F,CAAM,CAAGC,QAAQ,CAAC,KAAKxF,IAAL,CAAUoD,GAAV,CAAc,SAAd,CAAD,CAFoB,CAIzCkC,CAAK,CAAC9D,IAAN,CAAW,SAASC,CAAT,CAAgBgE,CAAhB,CAAsB,CAC7BA,CAAI,CAAGtH,CAAC,CAACsH,CAAD,CAAR,CAGA,GAAIC,CAAAA,CAAU,CAAGD,CAAI,CAACrC,GAAL,CAAS,SAAT,EAAsBoC,QAAQ,CAACC,CAAI,CAACrC,GAAL,CAAS,SAAT,CAAD,CAA9B,CAAsD,CAAvE,CAEA,GAAIsC,CAAU,CAAGH,CAAjB,CAAyB,CACrBA,CAAM,CAAGG,CACZ,CACJ,CATD,EAWA,MAAOH,CAAAA,CACV,CAhBD,CAwBAxF,CAAK,CAACkB,SAAN,CAAgBgD,SAAhB,CAA4B,UAAW,CACnC,MAAO,MAAKjE,IAAL,CAAU2B,QAAV,CAAmB,MAAnB,CACV,CAFD,CAUA5B,CAAK,CAACkB,SAAN,CAAgB0E,QAAhB,CAA2B,UAAW,CAClC,GAAIC,CAAAA,CAAM,CAAGzH,CAAC,CAAC0H,QAAQ,CAACC,aAAV,CAAd,CACA,MAAO,MAAK9F,IAAL,CAAUY,EAAV,CAAagF,CAAb,GAAwB,KAAK5F,IAAL,CAAU+F,GAAV,CAAcH,CAAd,EAAsB7E,MACxD,CAHD,CAWAhB,CAAK,CAACkB,SAAN,CAAgB+E,cAAhB,CAAiC,UAAW,CACxC,MAAO,MAAK9D,OAAL,GAAeP,QAAf,CAAwB,MAAxB,CACV,CAFD,CAUA5B,CAAK,CAACkB,SAAN,CAAgBgF,IAAhB,CAAuB,UAAW,CAC9B,GAAI,KAAKhC,SAAL,EAAJ,CAAsB,CAClB,MACH,CAED,GAAIiC,CAAAA,CAAc,CAAG,GAAItH,CAAAA,CAAJ,CAAY,iBAAZ,CAArB,CAEA,GAAI,KAAKgG,gBAAL,EAAJ,CAA6B,CACzB,KAAKF,UAAL,EACH,CAFD,IAEO,CACH,KAAKI,UAAL,EACH,CAED,GAAI,CAAC,KAAKtE,UAAV,CAAsB,CAClB,KAAKU,WAAL,EACH,CAED,KAAKW,WAAL,GACCE,IADD,CACM,SAASoE,CAAT,CAAmB,IACjBC,CAAAA,CAAY,CAAG,KAAKf,eAAL,EADE,CAEjBgB,CAAQ,CAAGD,CAAY,CAAG,CAFT,CAIrB,KAAKpG,IAAL,CAAUoD,GAAV,CAAc,SAAd,CAAyBiD,CAAzB,EACAF,CAAQ,CAACG,SAAT,CAFuBD,CAAQ,CAAG,CAElC,EACAF,CAAQ,CAACF,IAAT,GAEA,KAAKjG,IAAL,CAAUgF,WAAV,CAAsB,MAAtB,EAA8BD,QAA9B,CAAuC,MAAvC,EACA,KAAKwB,iBAAL,GACA,KAAKpE,QAAL,GAAgBqE,KAAhB,GACArI,CAAC,CAAC,MAAD,CAAD,CAAU4G,QAAV,CAAmB,YAAnB,EACA,KAAK/E,IAAL,CAAU6C,OAAV,CAAkBnE,CAAW,CAAC+H,KAA9B,CAAqC,IAArC,CAGH,CAfK,CAeJ7E,IAfI,CAeC,IAfD,CADN,EAiBCG,IAjBD,CAiBMmE,CAAc,CAACQ,OAjBrB,CAkBH,CAnCD,CA0CA3G,CAAK,CAACkB,SAAN,CAAgB0F,aAAhB,CAAgC,UAAW,CACvC,GAAIC,CAAAA,CAAW,CAAG,KAAK3G,KAAL,CAAWC,IAAX,CAAgBrB,CAAS,CAACS,IAA1B,CAAlB,CACA,GAA0B,CAAtB,EAAAsH,CAAW,CAAC7F,MAAhB,CAA6B,CACzB,KAAK2C,IAAL,EACH,CACJ,CALD,CAYA3D,CAAK,CAACkB,SAAN,CAAgByC,IAAhB,CAAuB,UAAW,CAC9B,KAAK7B,WAAL,GAAmB8C,IAAnB,CAAwB,SAASwB,CAAT,CAAmB,CACvCxH,CAAS,CAACkI,WAAV,GACA,GAAI,CAAC,KAAKvF,uBAAL,EAAL,CAAqC,CAEjC6E,CAAQ,CAACzC,IAAT,GACAvF,CAAC,CAAC,MAAD,CAAD,CAAU6G,WAAV,CAAsB,YAAtB,CACH,CAED,GAAIoB,CAAAA,CAAY,CAAGZ,QAAQ,CAAC,KAAKxF,IAAL,CAAUoD,GAAV,CAAc,SAAd,CAAD,CAA3B,CACA,KAAKpD,IAAL,CAAUoD,GAAV,CAAc,SAAd,CAAyB,EAAzB,EACA+C,CAAQ,CAACG,SAAT,CAAmBF,CAAY,CAAG,CAAlC,EAEA,KAAKU,iBAAL,GAEA,GAAI,KAAKd,cAAL,EAAJ,CAA2B,CAEvB,KAAK9D,OAAL,GAAe6E,GAAf,CAAmB,kDAAnB,CAAuE,UAAW,CAC9E,KAAK7E,OAAL,GAAe8C,WAAf,CAA2B,MAA3B,EAAmCD,QAAnC,CAA4C,MAA5C,CACH,CAFsE,CAErEnD,IAFqE,CAEhE,IAFgE,CAAvE,CAGH,CALD,IAKO,CACH,KAAKM,OAAL,GAAe8C,WAAf,CAA2B,MAA3B,EAAmCD,QAAnC,CAA4C,MAA5C,CACH,CAED,KAAK/E,IAAL,CAAU6C,OAAV,CAAkBnE,CAAW,CAACsI,MAA9B,CAAsC,IAAtC,CACH,CAxBuB,CAwBtBpF,IAxBsB,CAwBjB,IAxBiB,CAAxB,CAyBH,CA1BD,CAiCA7B,CAAK,CAACkB,SAAN,CAAgBgG,OAAhB,CAA0B,UAAW,CACjC,KAAKjH,IAAL,CAAUkH,MAAV,GACA,KAAKlH,IAAL,CAAU6C,OAAV,CAAkBnE,CAAW,CAACyI,SAA9B,CAAyC,IAAzC,CACH,CAHD,CAYApH,CAAK,CAACkB,SAAN,CAAgBsF,iBAAhB,CAAoC,UAAW,CAM3CpI,CAAC,CAAC,MAAD,CAAD,CAAU0G,QAAV,GAAqBrD,IAArB,CAA0B,SAASC,CAAT,CAAgB2F,CAAhB,CAAuB,CAE7C,GAAI,CAAC,KAAKpH,IAAL,CAAUY,EAAV,CAAawG,CAAb,CAAL,CAA0B,CACtBA,CAAK,CAAGjJ,CAAC,CAACiJ,CAAD,CAAT,CACA,GAAIJ,CAAAA,CAAM,CAAGI,CAAK,CAACC,IAAN,CAAW,aAAX,CAAb,CAEA,GAAe,MAAX,GAAAL,CAAJ,CAAuB,CAEnBI,CAAK,CAACE,IAAN,CAAW,sBAAX,CAAmCN,CAAnC,EACA,KAAKzG,cAAL,CAAoBgH,IAApB,CAAyBH,CAAzB,EAGAA,CAAK,CAACC,IAAN,CAAW,aAAX,CAA0B,MAA1B,CACH,CACJ,CACJ,CAfyB,CAexBzF,IAfwB,CAenB,IAfmB,CAA1B,EAkBA,KAAK5B,IAAL,CAAUqH,IAAV,CAAe,aAAf,CAA8B,OAA9B,CACH,CAzBD,CAkCAtH,CAAK,CAACkB,SAAN,CAAgB6F,iBAAhB,CAAoC,UAAW,CAC3C,KAAK9G,IAAL,CAAUqH,IAAV,CAAe,aAAf,CAA8B,MAA9B,EAGAlJ,CAAC,CAACqD,IAAF,CAAO,KAAKjB,cAAZ,CAA4B,SAASkB,CAAT,CAAgB+F,CAAhB,CAAyB,CACjDA,CAAO,CAAGrJ,CAAC,CAACqJ,CAAD,CAAX,CACA,GAAIC,CAAAA,CAAa,CAAGD,CAAO,CAACF,IAAR,CAAa,sBAAb,CAApB,CAGA,GAA4B,WAAxB,QAAOG,CAAAA,CAAX,CAAyC,CACrCD,CAAO,CAACE,UAAR,CAAmB,aAAnB,CACH,CAFD,IAEO,CAEHF,CAAO,CAACH,IAAR,CAAa,aAAb,CAA4BI,CAA5B,CACH,CACJ,CAXD,EAcA,KAAKlH,cAAL,CAAsB,EACzB,CAnBD,CA0BAR,CAAK,CAACkB,SAAN,CAAgBD,sBAAhB,CAAyC,UAAW,CAChD,KAAKkB,OAAL,GAAeyF,EAAf,CAAkB,SAAlB,CAA6B,SAASC,CAAT,CAAY,CACrC,GAAI,CAAC,KAAK3D,SAAL,EAAL,CAAuB,CACnB,MACH,CAED,GAAI2D,CAAC,CAACC,OAAF,EAAavJ,CAAQ,CAACwJ,MAA1B,CAAkC,CAC9B,KAAKpE,IAAL,EACH,CACJ,CAR4B,CAQ3B9B,IAR2B,CAQtB,IARsB,CAA7B,EAWA,KAAKM,OAAL,GAAe6F,KAAf,CAAqB,SAASH,CAAT,CAAY,CAG7B,GAAI,CAACzJ,CAAC,CAACyJ,CAAC,CAAChC,MAAH,CAAD,CAAYoC,OAAZ,CAAoBnJ,CAAS,CAACE,KAA9B,EAAqCgC,MAA1C,CAAkD,CAI9C,GAAI5C,CAAC,CAACyJ,CAAC,CAAChC,MAAH,CAAD,CAAYoC,OAAZ,CAAoBnJ,CAAS,CAACC,SAA9B,EAAyCiC,MAA7C,CAAqD,CACjD,KAAK4F,aAAL,EACH,CACJ,CACJ,CAXoB,CAWnB/E,IAXmB,CAWd,IAXc,CAArB,EAaArD,CAAY,CAACL,MAAb,CAAoB,KAAKiE,QAAL,EAApB,CAAqC,CAAC5D,CAAY,CAAC0J,MAAb,CAAoBC,QAArB,CAArC,EACA,KAAK/F,QAAL,GAAgBwF,EAAhB,CAAmBpJ,CAAY,CAAC0J,MAAb,CAAoBC,QAAvC,CAAiDrJ,CAAS,CAACO,IAA3D,CAAiE,SAASwI,CAAT,CAAYN,CAAZ,CAAkB,CAC/E,KAAK5D,IAAL,GACA4D,CAAI,CAACa,aAAL,CAAmBC,cAAnB,EACH,CAHgE,CAG/DxG,IAH+D,CAG1D,IAH0D,CAAjE,CAIH,CA9BD,CAwCA7B,CAAK,CAACkB,SAAN,CAAgByB,QAAhB,CAA2B,SAASD,CAAT,CAAgB4F,CAAhB,CAA6B,CACpD,GAAIC,CAAAA,CAAC,CAAG7F,CAAR,CACA,GAAqB,QAAjB,WAAOA,CAAP,GAA6B,CAACA,CAAK,CAAC8F,cAAN,CAAqB,MAArB,CAAlC,CAAgE,CAC5DD,CAAC,CAAGnK,CAAC,CAACqK,QAAF,EAAJ,CACAF,CAAC,CAAC5B,OAAF,CAAUjE,CAAV,CACH,CAED6F,CAAC,CAACvG,IAAF,CAAO,SAAS0G,CAAT,CAAkB,CACrBJ,CAAW,CAACI,CAAD,CAGd,CAJD,EAKCxG,IALD,CAKM5D,CAAY,CAACwC,SALnB,EAOA,MAAOyH,CAAAA,CACV,CAfD,CAiBA,MAAOvI,CAAAA,CACV,CA7uBK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Contain the logic for modals.\n *\n * @module     core/modal\n * @class      modal\n * @package    core\n * @copyright  2016 Ryan Wyllie <ryan@moodle.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine([\n    'jquery',\n    'core/templates',\n    'core/notification',\n    'core/key_codes',\n    'core/custom_interaction_events',\n    'core/modal_backdrop',\n    'core/event',\n    'core/modal_events',\n    'core/local/aria/focuslock',\n    'core/pending',\n], function($, Templates, Notification, KeyCodes, CustomEvents, ModalBackdrop, Event, ModalEvents, FocusLock, Pending) {\n\n    var SELECTORS = {\n        CONTAINER: '[data-region=\"modal-container\"]',\n        MODAL: '[data-region=\"modal\"]',\n        HEADER: '[data-region=\"header\"]',\n        TITLE: '[data-region=\"title\"]',\n        BODY: '[data-region=\"body\"]',\n        FOOTER: '[data-region=\"footer\"]',\n        HIDE: '[data-action=\"hide\"]',\n        DIALOG: '[role=dialog]',\n        FORM: 'form',\n        MENU_BAR: '[role=menubar]',\n        HAS_Z_INDEX: '.moodle-has-zindex',\n        CAN_RECEIVE_FOCUS: 'input:not([type=\"hidden\"]), a[href], button, textarea, select, [tabindex]',\n    };\n\n    var TEMPLATES = {\n        LOADING: 'core/loading',\n        BACKDROP: 'core/modal_backdrop',\n    };\n\n    /**\n     * Module singleton for the backdrop to be reused by all Modal instances.\n     */\n    var backdropPromise;\n\n    /**\n     * A counter that gets incremented for each modal created. This can be\n     * used to generate unique values for the modals.\n     */\n    var modalCounter = 0;\n\n    /**\n     * Constructor for the Modal.\n     *\n     * @param {object} root The root jQuery element for the modal\n     */\n    var Modal = function(root) {\n        this.root = $(root);\n        this.modal = this.root.find(SELECTORS.MODAL);\n        this.header = this.modal.find(SELECTORS.HEADER);\n        this.title = this.header.find(SELECTORS.TITLE);\n        this.body = this.modal.find(SELECTORS.BODY);\n        this.footer = this.modal.find(SELECTORS.FOOTER);\n        this.hiddenSiblings = [];\n        this.isAttached = false;\n        this.bodyJS = null;\n        this.footerJS = null;\n        this.modalCount = modalCounter++;\n\n        if (!this.root.is(SELECTORS.CONTAINER)) {\n            Notification.exception({message: 'Element is not a modal container'});\n        }\n\n        if (!this.modal.length) {\n            Notification.exception({message: 'Container does not contain a modal'});\n        }\n\n        if (!this.header.length) {\n            Notification.exception({message: 'Modal is missing a header region'});\n        }\n\n        if (!this.title.length) {\n            Notification.exception({message: 'Modal header is missing a title region'});\n        }\n\n        if (!this.body.length) {\n            Notification.exception({message: 'Modal is missing a body region'});\n        }\n\n        if (!this.footer.length) {\n            Notification.exception({message: 'Modal is missing a footer region'});\n        }\n\n        this.registerEventListeners();\n    };\n\n    /**\n     * Add the modal to the page, if it hasn't already been added. This includes running any\n     * javascript that has been cached until now.\n     *\n     * @method attachToDOM\n     */\n    Modal.prototype.attachToDOM = function() {\n        if (this.isAttached) {\n            return;\n        }\n\n        $('body').append(this.root);\n        FocusLock.trapFocus(this.root[0]);\n\n        // If we'd cached any JS then we can run it how that the modal is\n        // attached to the DOM.\n        if (this.bodyJS) {\n            Templates.runTemplateJS(this.bodyJS);\n            this.bodyJS = null;\n        }\n\n        if (this.footerJS) {\n            Templates.runTemplateJS(this.footerJS);\n            this.footerJS = null;\n        }\n\n        this.isAttached = true;\n    };\n\n    /**\n     * Count the number of other visible modals (not including this one).\n     *\n     * @method countOtherVisibleModals\n     * @return {int}\n     */\n    Modal.prototype.countOtherVisibleModals = function() {\n        var count = 0;\n        $('body').find(SELECTORS.CONTAINER).each(function(index, element) {\n            element = $(element);\n\n            // If we haven't found ourself and the element is visible.\n            if (!this.root.is(element) && element.hasClass('show')) {\n                count++;\n            }\n        }.bind(this));\n\n        return count;\n    };\n\n    /**\n     * Get the modal backdrop.\n     *\n     * @method getBackdrop\n     * @return {object} jQuery promise\n     */\n    Modal.prototype.getBackdrop = function() {\n        if (!backdropPromise) {\n            backdropPromise = Templates.render(TEMPLATES.BACKDROP, {})\n                .then(function(html) {\n                    var element = $(html);\n\n                    return new ModalBackdrop(element);\n                })\n                .fail(Notification.exception);\n        }\n\n        return backdropPromise;\n    };\n\n    /**\n     * Get the root element of this modal.\n     *\n     * @method getRoot\n     * @return {object} jQuery object\n     */\n    Modal.prototype.getRoot = function() {\n        return this.root;\n    };\n\n    /**\n     * Get the modal element of this modal.\n     *\n     * @method getModal\n     * @return {object} jQuery object\n     */\n    Modal.prototype.getModal = function() {\n        return this.modal;\n    };\n\n    /**\n     * Get the modal title element.\n     *\n     * @method getTitle\n     * @return {object} jQuery object\n     */\n    Modal.prototype.getTitle = function() {\n        return this.title;\n    };\n\n    /**\n     * Get the modal body element.\n     *\n     * @method getBody\n     * @return {object} jQuery object\n     */\n    Modal.prototype.getBody = function() {\n        return this.body;\n    };\n\n    /**\n     * Get the modal footer element.\n     *\n     * @method getFooter\n     * @return {object} jQuery object\n     */\n    Modal.prototype.getFooter = function() {\n        return this.footer;\n    };\n\n    /**\n     * Get the unique modal count.\n     *\n     * @method getModalCount\n     * @return {int}\n     */\n    Modal.prototype.getModalCount = function() {\n        return this.modalCount;\n    };\n\n    /**\n     * Set the modal title element.\n     *\n     * This method is overloaded to take either a string value for the title or a jQuery promise that is resolved with\n     * HTML most commonly from a Str.get_string call.\n     *\n     * @method setTitle\n     * @param {(string|object)} value The title string or jQuery promise which resolves to the title.\n     */\n    Modal.prototype.setTitle = function(value) {\n        var title = this.getTitle();\n\n        this.asyncSet(value, title.html.bind(title));\n    };\n\n    /**\n     * Set the modal body element.\n     *\n     * This method is overloaded to take either a string value for the body or a jQuery promise that is resolved with\n     * HTML and Javascript most commonly from a Templates.render call.\n     *\n     * @method setBody\n     * @param {(string|object)} value The body string or jQuery promise which resolves to the body.\n     */\n    Modal.prototype.setBody = function(value) {\n        var body = this.getBody();\n\n        if (typeof value === 'string') {\n            // Just set the value if it's a string.\n            body.html(value);\n            Event.notifyFilterContentUpdated(body);\n            this.getRoot().trigger(ModalEvents.bodyRendered, this);\n        } else {\n            var jsPendingId = 'amd-modal-js-pending-id-' + this.getModalCount();\n            M.util.js_pending(jsPendingId);\n            // Otherwise we assume it's a promise to be resolved with\n            // html and javascript.\n            var contentPromise = null;\n            body.css('overflow', 'hidden');\n\n            if (value.state() == 'pending') {\n                // We're still waiting for the body promise to resolve so\n                // let's show a loading icon.\n                var height = body.innerHeight();\n                if (height < 100) {\n                    height = 100;\n                }\n\n                body.animate({height: height + 'px'}, 150);\n\n                body.html('');\n                contentPromise = Templates.render(TEMPLATES.LOADING, {})\n                    .then(function(html) {\n                        var loadingIcon = $(html).hide();\n                        body.html(loadingIcon);\n                        loadingIcon.fadeIn(150);\n\n                        // We only want the loading icon to fade out\n                        // when the content for the body has finished\n                        // loading.\n                        return $.when(loadingIcon.promise(), value);\n                    })\n                    .then(function(loadingIcon) {\n                        // Once the content has finished loading and\n                        // the loading icon has been shown then we can\n                        // fade the icon away to reveal the content.\n                        return loadingIcon.fadeOut(100).promise();\n                    })\n                    .then(function() {\n                        return value;\n                    });\n            } else {\n                // The content is already loaded so let's just display\n                // it to the user. No need for a loading icon.\n                contentPromise = value;\n            }\n\n            // Now we can actually display the content.\n            contentPromise.then(function(html, js) {\n                var result = null;\n\n                if (this.isVisible()) {\n                    // If the modal is visible then we should display\n                    // the content gracefully for the user.\n                    body.css('opacity', 0);\n                    var currentHeight = body.innerHeight();\n                    body.html(html);\n                    // We need to clear any height values we've set here\n                    // in order to measure the height of the content being\n                    // added. This then allows us to animate the height\n                    // transition.\n                    body.css('height', '');\n                    var newHeight = body.innerHeight();\n                    body.css('height', currentHeight + 'px');\n                    result = body.animate(\n                        {height: newHeight + 'px', opacity: 1},\n                        {duration: 150, queue: false}\n                    ).promise();\n                } else {\n                    // Since the modal isn't visible we can just immediately\n                    // set the content. No need to animate it.\n                    body.html(html);\n                }\n\n                if (js) {\n                    if (this.isAttached) {\n                        // If we're in the DOM then run the JS immediately.\n                        Templates.runTemplateJS(js);\n                    } else {\n                        // Otherwise cache it to be run when we're attached.\n                        this.bodyJS = js;\n                    }\n                }\n\n                return result;\n            }.bind(this))\n            .then(function(result) {\n                Event.notifyFilterContentUpdated(body);\n                this.getRoot().trigger(ModalEvents.bodyRendered, this);\n                return result;\n            }.bind(this))\n            .fail(Notification.exception)\n            .always(function() {\n                // When we're done displaying all of the content we need\n                // to clear the custom values we've set here.\n                body.css('height', '');\n                body.css('overflow', '');\n                body.css('opacity', '');\n                M.util.js_complete(jsPendingId);\n\n                return;\n            })\n            .fail(Notification.exception);\n        }\n    };\n\n    /**\n     * Set the modal footer element. The footer element is made visible, if it\n     * isn't already.\n     *\n     * This method is overloaded to take either a string\n     * value for the body or a jQuery promise that is resolved with HTML and Javascript\n     * most commonly from a Templates.render call.\n     *\n     * @method setFooter\n     * @param {(string|object)} value The footer string or jQuery promise\n     */\n    Modal.prototype.setFooter = function(value) {\n        // Make sure the footer is visible.\n        this.showFooter();\n\n        var footer = this.getFooter();\n\n        if (typeof value === 'string') {\n            // Just set the value if it's a string.\n            footer.html(value);\n        } else {\n            // Otherwise we assume it's a promise to be resolved with\n            // html and javascript.\n            Templates.render(TEMPLATES.LOADING, {}).done(function(html) {\n                footer.html(html);\n\n                value.done(function(html, js) {\n                    footer.html(html);\n\n                    if (js) {\n                        if (this.isAttached) {\n                            // If we're in the DOM then run the JS immediately.\n                            Templates.runTemplateJS(js);\n                        } else {\n                            // Otherwise cache it to be run when we're attached.\n                            this.footerJS = js;\n                        }\n                    }\n                }.bind(this));\n            }.bind(this));\n        }\n    };\n\n    /**\n     * Check if the footer has any content in it.\n     *\n     * @method hasFooterContent\n     * @return {bool}\n     */\n    Modal.prototype.hasFooterContent = function() {\n        return this.getFooter().children().length ? true : false;\n    };\n\n    /**\n     * Hide the footer element.\n     *\n     * @method hideFooter\n     */\n    Modal.prototype.hideFooter = function() {\n        this.getFooter().addClass('hidden');\n    };\n\n    /**\n     * Show the footer element.\n     *\n     * @method showFooter\n     */\n    Modal.prototype.showFooter = function() {\n        this.getFooter().removeClass('hidden');\n    };\n\n    /**\n     * Mark the modal as a large modal.\n     *\n     * @method setLarge\n     */\n    Modal.prototype.setLarge = function() {\n        if (this.isLarge()) {\n            return;\n        }\n\n        this.getModal().addClass('modal-lg');\n    };\n\n    /**\n     * Check if the modal is a large modal.\n     *\n     * @method isLarge\n     * @return {bool}\n     */\n    Modal.prototype.isLarge = function() {\n        return this.getModal().hasClass('modal-lg');\n    };\n\n    /**\n     * Mark the modal as a small modal.\n     *\n     * @method setSmall\n     */\n    Modal.prototype.setSmall = function() {\n        if (this.isSmall()) {\n            return;\n        }\n\n        this.getModal().removeClass('modal-lg');\n    };\n\n    /**\n     * Check if the modal is a small modal.\n     *\n     * @method isSmall\n     * @return {bool}\n     */\n    Modal.prototype.isSmall = function() {\n        return !this.getModal().hasClass('modal-lg');\n    };\n\n    /**\n     * Determine the highest z-index value currently on the page.\n     *\n     * @method calculateZIndex\n     * @return {int}\n     */\n    Modal.prototype.calculateZIndex = function() {\n        var items = $(SELECTORS.DIALOG + ', ' + SELECTORS.MENU_BAR + ', ' + SELECTORS.HAS_Z_INDEX);\n        var zIndex = parseInt(this.root.css('z-index'));\n\n        items.each(function(index, item) {\n            item = $(item);\n            // Note that webkit browsers won't return the z-index value from the CSS stylesheet\n            // if the element doesn't have a position specified. Instead it'll return \"auto\".\n            var itemZIndex = item.css('z-index') ? parseInt(item.css('z-index')) : 0;\n\n            if (itemZIndex > zIndex) {\n                zIndex = itemZIndex;\n            }\n        });\n\n        return zIndex;\n    };\n\n    /**\n     * Check if this modal is visible.\n     *\n     * @method isVisible\n     * @return {bool}\n     */\n    Modal.prototype.isVisible = function() {\n        return this.root.hasClass('show');\n    };\n\n    /**\n     * Check if this modal has focus.\n     *\n     * @method hasFocus\n     * @return {bool}\n     */\n    Modal.prototype.hasFocus = function() {\n        var target = $(document.activeElement);\n        return this.root.is(target) || this.root.has(target).length;\n    };\n\n    /**\n     * Check if this modal has CSS transitions applied.\n     *\n     * @method hasTransitions\n     * @return {bool}\n     */\n    Modal.prototype.hasTransitions = function() {\n        return this.getRoot().hasClass('fade');\n    };\n\n    /**\n     * Display this modal. The modal will be attached to the DOM if it hasn't\n     * already been.\n     *\n     * @method show\n     */\n    Modal.prototype.show = function() {\n        if (this.isVisible()) {\n            return;\n        }\n\n        var pendingPromise = new Pending('core/modal:show');\n\n        if (this.hasFooterContent()) {\n            this.showFooter();\n        } else {\n            this.hideFooter();\n        }\n\n        if (!this.isAttached) {\n            this.attachToDOM();\n        }\n\n        this.getBackdrop()\n        .then(function(backdrop) {\n            var currentIndex = this.calculateZIndex();\n            var newIndex = currentIndex + 2;\n            var newBackdropIndex = newIndex - 1;\n            this.root.css('z-index', newIndex);\n            backdrop.setZIndex(newBackdropIndex);\n            backdrop.show();\n\n            this.root.removeClass('hide').addClass('show');\n            this.accessibilityShow();\n            this.getModal().focus();\n            $('body').addClass('modal-open');\n            this.root.trigger(ModalEvents.shown, this);\n\n            return;\n        }.bind(this))\n        .then(pendingPromise.resolve);\n    };\n\n    /**\n     * Hide this modal if it does not contain a form.\n     *\n     * @method hideIfNotForm\n     */\n    Modal.prototype.hideIfNotForm = function() {\n        var formElement = this.modal.find(SELECTORS.FORM);\n        if (formElement.length == 0) {\n            this.hide();\n        }\n    };\n\n    /**\n     * Hide this modal.\n     *\n     * @method hide\n     */\n    Modal.prototype.hide = function() {\n        this.getBackdrop().done(function(backdrop) {\n            FocusLock.untrapFocus();\n            if (!this.countOtherVisibleModals()) {\n                // Hide the backdrop if we're the last open modal.\n                backdrop.hide();\n                $('body').removeClass('modal-open');\n            }\n\n            var currentIndex = parseInt(this.root.css('z-index'));\n            this.root.css('z-index', '');\n            backdrop.setZIndex(currentIndex - 3);\n\n            this.accessibilityHide();\n\n            if (this.hasTransitions()) {\n                // Wait for CSS transitions to complete before hiding the element.\n                this.getRoot().one('transitionend webkitTransitionEnd oTransitionEnd', function() {\n                    this.getRoot().removeClass('show').addClass('hide');\n                }.bind(this));\n            } else {\n                this.getRoot().removeClass('show').addClass('hide');\n            }\n\n            this.root.trigger(ModalEvents.hidden, this);\n        }.bind(this));\n    };\n\n    /**\n     * Remove this modal from the DOM.\n     *\n     * @method destroy\n     */\n    Modal.prototype.destroy = function() {\n        this.root.remove();\n        this.root.trigger(ModalEvents.destroyed, this);\n    };\n\n    /**\n     * Sets the appropriate aria attributes on this dialogue and the other\n     * elements in the DOM to ensure that screen readers are able to navigate\n     * the dialogue popup correctly.\n     *\n     * @method accessibilityShow\n     */\n    Modal.prototype.accessibilityShow = function() {\n        // We need to get a list containing each sibling element and the shallowest\n        // non-ancestral nodes in the DOM. We can shortcut this a little by leveraging\n        // the fact that this dialogue is always appended to the document body therefore\n        // it's siblings are the shallowest non-ancestral nodes. If that changes then\n        // this code should also be updated.\n        $('body').children().each(function(index, child) {\n            // Skip the current modal.\n            if (!this.root.is(child)) {\n                child = $(child);\n                var hidden = child.attr('aria-hidden');\n                // If they are already hidden we can ignore them.\n                if (hidden !== 'true') {\n                    // Save their current state.\n                    child.data('previous-aria-hidden', hidden);\n                    this.hiddenSiblings.push(child);\n\n                    // Hide this node from screen readers.\n                    child.attr('aria-hidden', 'true');\n                }\n            }\n        }.bind(this));\n\n        // Make us visible to screen readers.\n        this.root.attr('aria-hidden', 'false');\n    };\n\n    /**\n     * Restores the aria visibility on the DOM elements changed when displaying\n     * the dialogue popup and makes the dialogue aria hidden to allow screen\n     * readers to navigate the main page correctly when the dialogue is closed.\n     *\n     * @method accessibilityHide\n     */\n    Modal.prototype.accessibilityHide = function() {\n        this.root.attr('aria-hidden', 'true');\n\n        // Restore the sibling nodes back to their original values.\n        $.each(this.hiddenSiblings, function(index, sibling) {\n            sibling = $(sibling);\n            var previousValue = sibling.data('previous-aria-hidden');\n            // If the element didn't previously have an aria-hidden attribute\n            // then we can just remove the one we set.\n            if (typeof previousValue == 'undefined') {\n                sibling.removeAttr('aria-hidden');\n            } else {\n                // Otherwise set it back to the old value (which will be false).\n                sibling.attr('aria-hidden', previousValue);\n            }\n        });\n\n        // Clear the cache. No longer need to store these.\n        this.hiddenSiblings = [];\n    };\n\n    /**\n     * Set up all of the event handling for the modal.\n     *\n     * @method registerEventListeners\n     */\n    Modal.prototype.registerEventListeners = function() {\n        this.getRoot().on('keydown', function(e) {\n            if (!this.isVisible()) {\n                return;\n            }\n\n            if (e.keyCode == KeyCodes.escape) {\n                this.hide();\n            }\n        }.bind(this));\n\n        // Listen for clicks on the modal container.\n        this.getRoot().click(function(e) {\n            // If the click wasn't inside the modal element then we should\n            // hide the modal.\n            if (!$(e.target).closest(SELECTORS.MODAL).length) {\n                // The check above fails to detect the click was inside the modal when the DOM tree is already changed.\n                // So, we check if we can still find the container element or not. If not, then the DOM tree is changed.\n                // It's best not to hide the modal in that case.\n                if ($(e.target).closest(SELECTORS.CONTAINER).length) {\n                    this.hideIfNotForm();\n                }\n            }\n        }.bind(this));\n\n        CustomEvents.define(this.getModal(), [CustomEvents.events.activate]);\n        this.getModal().on(CustomEvents.events.activate, SELECTORS.HIDE, function(e, data) {\n            this.hide();\n            data.originalEvent.preventDefault();\n        }.bind(this));\n    };\n\n    /**\n     * Set or resolve and set the value using the function.\n     *\n     * @method asyncSet\n     * @param {(string|object)} value The string or jQuery promise.\n     * @param {function} setFunction The setter\n     * @return {Promise}\n     */\n    Modal.prototype.asyncSet = function(value, setFunction) {\n        var p = value;\n        if (typeof value !== 'object' || !value.hasOwnProperty('then')) {\n            p = $.Deferred();\n            p.resolve(value);\n        }\n\n        p.then(function(content) {\n            setFunction(content);\n\n            return;\n        })\n        .fail(Notification.exception);\n\n        return p;\n    };\n\n    return Modal;\n});\n"],"file":"modal.min.js"}
=======
{"version":3,"sources":["../src/modal.js"],"names":["define","$","Templates","Notification","KeyCodes","CustomEvents","ModalBackdrop","Event","ModalEvents","FocusLock","Pending","Aria","Fullscreen","SELECTORS","CONTAINER","MODAL","HEADER","TITLE","BODY","FOOTER","HIDE","DIALOG","FORM","MENU_BAR","HAS_Z_INDEX","CAN_RECEIVE_FOCUS","TEMPLATES","LOADING","BACKDROP","backdropPromise","modalCounter","Modal","root","modal","find","header","headerPromise","Deferred","title","titlePromise","body","bodyPromise","footer","footerPromise","hiddenSiblings","isAttached","bodyJS","footerJS","modalCount","attachmentPoint","document","createElement","append","is","exception","message","length","registerEventListeners","prototype","attachToDOM","getAttachmentPoint","trapFocus","runTemplateJS","countOtherVisibleModals","count","each","index","element","hasClass","bind","getBackdrop","render","then","html","fail","getRoot","getModal","getTitle","getBody","getFooter","getTitlePromise","getBodyPromise","getFooterPromise","getModalCount","setTitle","value","asyncSet","resolve","catch","setBody","notifyFilterContentUpdated","trigger","bodyRendered","jsPendingId","M","util","js_pending","contentPromise","css","when","state","height","innerHeight","animate","loadingIcon","hide","fadeIn","promise","fadeOut","js","result","isVisible","currentHeight","newHeight","opacity","duration","queue","always","js_complete","setFooter","showFooter","hasFooterContent","children","hideFooter","addClass","removeClass","setLarge","isLarge","setSmall","isSmall","setScrollable","classList","remove","add","calculateZIndex","items","zIndex","parseInt","item","itemZIndex","hasFocus","target","activeElement","has","hasTransitions","getElement","show","pendingPromise","backdrop","currentIndex","newIndex","setZIndex","accessibilityShow","focus","shown","hideIfNotForm","formElement","done","untrapFocus","accessibilityHide","one","hidden","destroy","destroyed","unhide","get","hideSiblings","unhideSiblings","on","e","keyCode","escape","removeOnClose","click","closest","outsideClickEvent","outsideClick","isDefaultPrevented","events","activate","data","originalEvent","preventDefault","registerCloseOnCancel","getActionSelector","cancelEvent","cancel","registerCloseOnSave","saveEvent","save","setFunction","p","hasOwnProperty","content","setButtonText","action","button","Error","text","setRemoveOnClose"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Contain the logic for modals.\n *\n * @module core/modal\n * @class core/modal\n * @copyright  2016 Ryan Wyllie <ryan@moodle.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\ndefine([\n    'jquery',\n    'core/templates',\n    'core/notification',\n    'core/key_codes',\n    'core/custom_interaction_events',\n    'core/modal_backdrop',\n    'core/event',\n    'core/modal_events',\n    'core/local/aria/focuslock',\n    'core/pending',\n    'core/aria',\n    'core/fullscreen'\n], function(\n    $,\n    Templates,\n    Notification,\n    KeyCodes,\n    CustomEvents,\n    ModalBackdrop,\n    Event,\n    ModalEvents,\n    FocusLock,\n    Pending,\n    Aria,\n    Fullscreen\n) {\n\n    var SELECTORS = {\n        CONTAINER: '[data-region=\"modal-container\"]',\n        MODAL: '[data-region=\"modal\"]',\n        HEADER: '[data-region=\"header\"]',\n        TITLE: '[data-region=\"title\"]',\n        BODY: '[data-region=\"body\"]',\n        FOOTER: '[data-region=\"footer\"]',\n        HIDE: '[data-action=\"hide\"]',\n        DIALOG: '[role=dialog]',\n        FORM: 'form',\n        MENU_BAR: '[role=menubar]',\n        HAS_Z_INDEX: '.moodle-has-zindex',\n        CAN_RECEIVE_FOCUS: 'input:not([type=\"hidden\"]), a[href], button, textarea, select, [tabindex]',\n    };\n\n    var TEMPLATES = {\n        LOADING: 'core/loading',\n        BACKDROP: 'core/modal_backdrop',\n    };\n\n    /**\n     * Module singleton for the backdrop to be reused by all Modal instances.\n     */\n    var backdropPromise;\n\n    /**\n     * A counter that gets incremented for each modal created. This can be\n     * used to generate unique values for the modals.\n     */\n    var modalCounter = 0;\n\n    /**\n     * Constructor for the Modal.\n     *\n     * @param {object} root The root jQuery element for the modal\n     */\n    var Modal = function(root) {\n        this.root = $(root);\n        this.modal = this.root.find(SELECTORS.MODAL);\n        this.header = this.modal.find(SELECTORS.HEADER);\n        this.headerPromise = $.Deferred();\n        this.title = this.header.find(SELECTORS.TITLE);\n        this.titlePromise = $.Deferred();\n        this.body = this.modal.find(SELECTORS.BODY);\n        this.bodyPromise = $.Deferred();\n        this.footer = this.modal.find(SELECTORS.FOOTER);\n        this.footerPromise = $.Deferred();\n        this.hiddenSiblings = [];\n        this.isAttached = false;\n        this.bodyJS = null;\n        this.footerJS = null;\n        this.modalCount = modalCounter++;\n        this.attachmentPoint = document.createElement('div');\n        document.body.append(this.attachmentPoint);\n\n        if (!this.root.is(SELECTORS.CONTAINER)) {\n            Notification.exception({message: 'Element is not a modal container'});\n        }\n\n        if (!this.modal.length) {\n            Notification.exception({message: 'Container does not contain a modal'});\n        }\n\n        if (!this.header.length) {\n            Notification.exception({message: 'Modal is missing a header region'});\n        }\n\n        if (!this.title.length) {\n            Notification.exception({message: 'Modal header is missing a title region'});\n        }\n\n        if (!this.body.length) {\n            Notification.exception({message: 'Modal is missing a body region'});\n        }\n\n        if (!this.footer.length) {\n            Notification.exception({message: 'Modal is missing a footer region'});\n        }\n\n        this.registerEventListeners();\n    };\n\n    /**\n     * Attach the modal to the correct part of the page.\n     *\n     * If it hasn't already been added it runs any\n     * javascript that has been cached until now.\n     *\n     * @method attachToDOM\n     */\n    Modal.prototype.attachToDOM = function() {\n        this.getAttachmentPoint().append(this.root);\n\n        if (this.isAttached) {\n            return;\n        }\n\n        FocusLock.trapFocus(this.root[0]);\n\n        // If we'd cached any JS then we can run it how that the modal is\n        // attached to the DOM.\n        if (this.bodyJS) {\n            Templates.runTemplateJS(this.bodyJS);\n            this.bodyJS = null;\n        }\n\n        if (this.footerJS) {\n            Templates.runTemplateJS(this.footerJS);\n            this.footerJS = null;\n        }\n\n        this.isAttached = true;\n    };\n\n    /**\n     * Count the number of other visible modals (not including this one).\n     *\n     * @method countOtherVisibleModals\n     * @return {int}\n     */\n    Modal.prototype.countOtherVisibleModals = function() {\n        var count = 0;\n        $('body').find(SELECTORS.CONTAINER).each(function(index, element) {\n            element = $(element);\n\n            // If we haven't found ourself and the element is visible.\n            if (!this.root.is(element) && element.hasClass('show')) {\n                count++;\n            }\n        }.bind(this));\n\n        return count;\n    };\n\n    /**\n     * Get the modal backdrop.\n     *\n     * @method getBackdrop\n     * @return {object} jQuery promise\n     */\n    Modal.prototype.getBackdrop = function() {\n        if (!backdropPromise) {\n            backdropPromise = Templates.render(TEMPLATES.BACKDROP, {})\n                .then(function(html) {\n                    var element = $(html);\n\n                    return new ModalBackdrop(element);\n                })\n                .fail(Notification.exception);\n        }\n\n        return backdropPromise;\n    };\n\n    /**\n     * Get the root element of this modal.\n     *\n     * @method getRoot\n     * @return {object} jQuery object\n     */\n    Modal.prototype.getRoot = function() {\n        return this.root;\n    };\n\n    /**\n     * Get the modal element of this modal.\n     *\n     * @method getModal\n     * @return {object} jQuery object\n     */\n    Modal.prototype.getModal = function() {\n        return this.modal;\n    };\n\n    /**\n     * Get the modal title element.\n     *\n     * @method getTitle\n     * @return {object} jQuery object\n     */\n    Modal.prototype.getTitle = function() {\n        return this.title;\n    };\n\n    /**\n     * Get the modal body element.\n     *\n     * @method getBody\n     * @return {object} jQuery object\n     */\n    Modal.prototype.getBody = function() {\n        return this.body;\n    };\n\n    /**\n     * Get the modal footer element.\n     *\n     * @method getFooter\n     * @return {object} jQuery object\n     */\n    Modal.prototype.getFooter = function() {\n        return this.footer;\n    };\n\n    /**\n     * Get a promise resolving to the title region.\n     *\n     * @method getTitlePromise\n     * @return {Promise}\n     */\n    Modal.prototype.getTitlePromise = function() {\n        return this.titlePromise;\n    };\n\n    /**\n     * Get a promise resolving to the body region.\n     *\n     * @method getBodyPromise\n     * @return {object} jQuery object\n     */\n    Modal.prototype.getBodyPromise = function() {\n        return this.bodyPromise;\n    };\n\n    /**\n     * Get a promise resolving to the footer region.\n     *\n     * @method getFooterPromise\n     * @return {object} jQuery object\n     */\n    Modal.prototype.getFooterPromise = function() {\n        return this.footerPromise;\n    };\n\n    /**\n     * Get the unique modal count.\n     *\n     * @method getModalCount\n     * @return {int}\n     */\n    Modal.prototype.getModalCount = function() {\n        return this.modalCount;\n    };\n\n    /**\n     * Set the modal title element.\n     *\n     * This method is overloaded to take either a string value for the title or a jQuery promise that is resolved with\n     * HTML most commonly from a Str.get_string call.\n     *\n     * @method setTitle\n     * @param {(string|object)} value The title string or jQuery promise which resolves to the title.\n     */\n    Modal.prototype.setTitle = function(value) {\n        var title = this.getTitle();\n        this.titlePromise = $.Deferred();\n\n        this.asyncSet(value, title.html.bind(title))\n        .then(function() {\n            this.titlePromise.resolve(title);\n        }.bind(this))\n        .catch(Notification.exception);\n    };\n\n    /**\n     * Set the modal body element.\n     *\n     * This method is overloaded to take either a string value for the body or a jQuery promise that is resolved with\n     * HTML and Javascript most commonly from a Templates.render call.\n     *\n     * @method setBody\n     * @param {(string|object)} value The body string or jQuery promise which resolves to the body.\n     */\n    Modal.prototype.setBody = function(value) {\n        this.bodyPromise = $.Deferred();\n\n        var body = this.getBody();\n\n        if (typeof value === 'string') {\n            // Just set the value if it's a string.\n            body.html(value);\n            Event.notifyFilterContentUpdated(body);\n            this.getRoot().trigger(ModalEvents.bodyRendered, this);\n            this.bodyPromise.resolve(body);\n        } else {\n            var jsPendingId = 'amd-modal-js-pending-id-' + this.getModalCount();\n            M.util.js_pending(jsPendingId);\n            // Otherwise we assume it's a promise to be resolved with\n            // html and javascript.\n            var contentPromise = null;\n            body.css('overflow', 'hidden');\n\n            // Ensure that the `value` is a jQuery Promise.\n            value = $.when(value);\n\n            if (value.state() == 'pending') {\n                // We're still waiting for the body promise to resolve so\n                // let's show a loading icon.\n                var height = body.innerHeight();\n                if (height < 100) {\n                    height = 100;\n                }\n\n                body.animate({height: height + 'px'}, 150);\n\n                body.html('');\n                contentPromise = Templates.render(TEMPLATES.LOADING, {})\n                    .then(function(html) {\n                        var loadingIcon = $(html).hide();\n                        body.html(loadingIcon);\n                        loadingIcon.fadeIn(150);\n\n                        // We only want the loading icon to fade out\n                        // when the content for the body has finished\n                        // loading.\n                        return $.when(loadingIcon.promise(), value);\n                    })\n                    .then(function(loadingIcon) {\n                        // Once the content has finished loading and\n                        // the loading icon has been shown then we can\n                        // fade the icon away to reveal the content.\n                        return loadingIcon.fadeOut(100).promise();\n                    })\n                    .then(function() {\n                        return value;\n                    });\n            } else {\n                // The content is already loaded so let's just display\n                // it to the user. No need for a loading icon.\n                contentPromise = value;\n            }\n\n            // Now we can actually display the content.\n            contentPromise.then(function(html, js) {\n                var result = null;\n\n                if (this.isVisible()) {\n                    // If the modal is visible then we should display\n                    // the content gracefully for the user.\n                    body.css('opacity', 0);\n                    var currentHeight = body.innerHeight();\n                    body.html(html);\n                    // We need to clear any height values we've set here\n                    // in order to measure the height of the content being\n                    // added. This then allows us to animate the height\n                    // transition.\n                    body.css('height', '');\n                    var newHeight = body.innerHeight();\n                    body.css('height', currentHeight + 'px');\n                    result = body.animate(\n                        {height: newHeight + 'px', opacity: 1},\n                        {duration: 150, queue: false}\n                    ).promise();\n                } else {\n                    // Since the modal isn't visible we can just immediately\n                    // set the content. No need to animate it.\n                    body.html(html);\n                }\n\n                if (js) {\n                    if (this.isAttached) {\n                        // If we're in the DOM then run the JS immediately.\n                        Templates.runTemplateJS(js);\n                    } else {\n                        // Otherwise cache it to be run when we're attached.\n                        this.bodyJS = js;\n                    }\n                }\n\n                return result;\n            }.bind(this))\n            .then(function(result) {\n                Event.notifyFilterContentUpdated(body);\n                this.getRoot().trigger(ModalEvents.bodyRendered, this);\n                return result;\n            }.bind(this))\n            .then(function() {\n                this.bodyPromise.resolve(body);\n                return;\n            }.bind(this))\n            .fail(Notification.exception)\n            .always(function() {\n                // When we're done displaying all of the content we need\n                // to clear the custom values we've set here.\n                body.css('height', '');\n                body.css('overflow', '');\n                body.css('opacity', '');\n                M.util.js_complete(jsPendingId);\n\n                return;\n            })\n            .fail(Notification.exception);\n        }\n    };\n\n    /**\n     * Set the modal footer element. The footer element is made visible, if it\n     * isn't already.\n     *\n     * This method is overloaded to take either a string\n     * value for the body or a jQuery promise that is resolved with HTML and Javascript\n     * most commonly from a Templates.render call.\n     *\n     * @method setFooter\n     * @param {(string|object)} value The footer string or jQuery promise\n     */\n    Modal.prototype.setFooter = function(value) {\n        // Make sure the footer is visible.\n        this.showFooter();\n        this.footerPromise = $.Deferred();\n\n        var footer = this.getFooter();\n\n        if (typeof value === 'string') {\n            // Just set the value if it's a string.\n            footer.html(value);\n            this.footerPromise.resolve(footer);\n        } else {\n            // Otherwise we assume it's a promise to be resolved with\n            // html and javascript.\n            Templates.render(TEMPLATES.LOADING, {})\n            .then(function(html) {\n                footer.html(html);\n\n                return value;\n            })\n            .then(function(html, js) {\n                footer.html(html);\n\n                if (js) {\n                    if (this.isAttached) {\n                        // If we're in the DOM then run the JS immediately.\n                        Templates.runTemplateJS(js);\n                    } else {\n                        // Otherwise cache it to be run when we're attached.\n                        this.footerJS = js;\n                    }\n                }\n\n                return footer;\n            }.bind(this))\n            .then(function(footer) {\n                this.footerPromise.resolve(footer);\n                return;\n            }.bind(this))\n            .catch(Notification.exception);\n        }\n    };\n\n    /**\n     * Check if the footer has any content in it.\n     *\n     * @method hasFooterContent\n     * @return {bool}\n     */\n    Modal.prototype.hasFooterContent = function() {\n        return this.getFooter().children().length ? true : false;\n    };\n\n    /**\n     * Hide the footer element.\n     *\n     * @method hideFooter\n     */\n    Modal.prototype.hideFooter = function() {\n        this.getFooter().addClass('hidden');\n    };\n\n    /**\n     * Show the footer element.\n     *\n     * @method showFooter\n     */\n    Modal.prototype.showFooter = function() {\n        this.getFooter().removeClass('hidden');\n    };\n\n    /**\n     * Mark the modal as a large modal.\n     *\n     * @method setLarge\n     */\n    Modal.prototype.setLarge = function() {\n        if (this.isLarge()) {\n            return;\n        }\n\n        this.getModal().addClass('modal-lg');\n    };\n\n    /**\n     * Check if the modal is a large modal.\n     *\n     * @method isLarge\n     * @return {bool}\n     */\n    Modal.prototype.isLarge = function() {\n        return this.getModal().hasClass('modal-lg');\n    };\n\n    /**\n     * Mark the modal as a small modal.\n     *\n     * @method setSmall\n     */\n    Modal.prototype.setSmall = function() {\n        if (this.isSmall()) {\n            return;\n        }\n\n        this.getModal().removeClass('modal-lg');\n    };\n\n    /**\n     * Check if the modal is a small modal.\n     *\n     * @method isSmall\n     * @return {bool}\n     */\n    Modal.prototype.isSmall = function() {\n        return !this.getModal().hasClass('modal-lg');\n    };\n\n    /**\n     * Set this modal to be scrollable or not.\n     *\n     * @method setScrollable\n     * @param {bool} value Whether the modal is scrollable or not\n     */\n    Modal.prototype.setScrollable = function(value) {\n        if (!value) {\n            this.getModal()[0].classList.remove('modal-dialog-scrollable');\n            return;\n        }\n\n        this.getModal()[0].classList.add('modal-dialog-scrollable');\n    };\n\n\n    /**\n     * Determine the highest z-index value currently on the page.\n     *\n     * @method calculateZIndex\n     * @return {int}\n     */\n    Modal.prototype.calculateZIndex = function() {\n        var items = $(SELECTORS.DIALOG + ', ' + SELECTORS.MENU_BAR + ', ' + SELECTORS.HAS_Z_INDEX);\n        var zIndex = parseInt(this.root.css('z-index'));\n\n        items.each(function(index, item) {\n            item = $(item);\n            // Note that webkit browsers won't return the z-index value from the CSS stylesheet\n            // if the element doesn't have a position specified. Instead it'll return \"auto\".\n            var itemZIndex = item.css('z-index') ? parseInt(item.css('z-index')) : 0;\n\n            if (itemZIndex > zIndex) {\n                zIndex = itemZIndex;\n            }\n        });\n\n        return zIndex;\n    };\n\n    /**\n     * Check if this modal is visible.\n     *\n     * @method isVisible\n     * @return {bool}\n     */\n    Modal.prototype.isVisible = function() {\n        return this.root.hasClass('show');\n    };\n\n    /**\n     * Check if this modal has focus.\n     *\n     * @method hasFocus\n     * @return {bool}\n     */\n    Modal.prototype.hasFocus = function() {\n        var target = $(document.activeElement);\n        return this.root.is(target) || this.root.has(target).length;\n    };\n\n    /**\n     * Check if this modal has CSS transitions applied.\n     *\n     * @method hasTransitions\n     * @return {bool}\n     */\n    Modal.prototype.hasTransitions = function() {\n        return this.getRoot().hasClass('fade');\n    };\n\n    /**\n     * Gets the jQuery wrapped node that the Modal should be attached to.\n     *\n     * @returns {jQuery}\n     */\n    Modal.prototype.getAttachmentPoint = function() {\n        return $(Fullscreen.getElement() || this.attachmentPoint);\n    };\n\n    /**\n     * Display this modal. The modal will be attached to the DOM if it hasn't\n     * already been.\n     *\n     * @method show\n     * @returns {Promise}\n     */\n    Modal.prototype.show = function() {\n        if (this.isVisible()) {\n            return $.Deferred().resolve();\n        }\n\n        var pendingPromise = new Pending('core/modal:show');\n\n        if (this.hasFooterContent()) {\n            this.showFooter();\n        } else {\n            this.hideFooter();\n        }\n\n        this.attachToDOM();\n\n        return this.getBackdrop()\n        .then(function(backdrop) {\n            var currentIndex = this.calculateZIndex();\n            var newIndex = currentIndex + 2;\n            var newBackdropIndex = newIndex - 1;\n            this.root.css('z-index', newIndex);\n            backdrop.setZIndex(newBackdropIndex);\n            backdrop.show();\n\n            this.root.removeClass('hide').addClass('show');\n            this.accessibilityShow();\n            this.getModal().focus();\n            $('body').addClass('modal-open');\n            this.root.trigger(ModalEvents.shown, this);\n\n            return;\n        }.bind(this))\n        .then(pendingPromise.resolve);\n    };\n\n    /**\n     * Hide this modal if it does not contain a form.\n     *\n     * @method hideIfNotForm\n     */\n    Modal.prototype.hideIfNotForm = function() {\n        var formElement = this.modal.find(SELECTORS.FORM);\n        if (formElement.length == 0) {\n            this.hide();\n        }\n    };\n\n    /**\n     * Hide this modal.\n     *\n     * @method hide\n     */\n    Modal.prototype.hide = function() {\n        this.getBackdrop().done(function(backdrop) {\n            FocusLock.untrapFocus();\n\n            if (!this.countOtherVisibleModals()) {\n                // Hide the backdrop if we're the last open modal.\n                backdrop.hide();\n                $('body').removeClass('modal-open');\n            }\n\n            var currentIndex = parseInt(this.root.css('z-index'));\n            this.root.css('z-index', '');\n            backdrop.setZIndex(currentIndex - 3);\n\n            this.accessibilityHide();\n\n            if (this.hasTransitions()) {\n                // Wait for CSS transitions to complete before hiding the element.\n                this.getRoot().one('transitionend webkitTransitionEnd oTransitionEnd', function() {\n                    this.getRoot().removeClass('show').addClass('hide');\n                }.bind(this));\n            } else {\n                this.getRoot().removeClass('show').addClass('hide');\n            }\n\n            // Ensure the modal is moved onto the body node if it is still attached to the DOM.\n            if ($(document.body).find(this.getRoot()).length) {\n                $(document.body).append(this.getRoot());\n            }\n\n            this.root.trigger(ModalEvents.hidden, this);\n        }.bind(this));\n    };\n\n    /**\n     * Remove this modal from the DOM.\n     *\n     * @method destroy\n     */\n    Modal.prototype.destroy = function() {\n        this.hide();\n        this.root.remove();\n        this.root.trigger(ModalEvents.destroyed, this);\n        this.attachmentPoint.remove();\n    };\n\n    /**\n     * Sets the appropriate aria attributes on this dialogue and the other\n     * elements in the DOM to ensure that screen readers are able to navigate\n     * the dialogue popup correctly.\n     *\n     * @method accessibilityShow\n     */\n    Modal.prototype.accessibilityShow = function() {\n        // Make us visible to screen readers.\n        Aria.unhide(this.root.get());\n\n        // Hide siblings.\n        Aria.hideSiblings(this.root.get()[0]);\n    };\n\n    /**\n     * Restores the aria visibility on the DOM elements changed when displaying\n     * the dialogue popup and makes the dialogue aria hidden to allow screen\n     * readers to navigate the main page correctly when the dialogue is closed.\n     *\n     * @method accessibilityHide\n     */\n    Modal.prototype.accessibilityHide = function() {\n        // Unhide siblings.\n        Aria.unhideSiblings(this.root.get()[0]);\n\n        // Hide this modal.\n        Aria.hide(this.root.get());\n    };\n\n    /**\n     * Set up all of the event handling for the modal.\n     *\n     * @method registerEventListeners\n     */\n    Modal.prototype.registerEventListeners = function() {\n        this.getRoot().on('keydown', function(e) {\n            if (!this.isVisible()) {\n                return;\n            }\n\n            if (e.keyCode == KeyCodes.escape) {\n                if (this.removeOnClose) {\n                    this.destroy();\n                } else {\n                    this.hide();\n                }\n            }\n        }.bind(this));\n\n        // Listen for clicks on the modal container.\n        this.getRoot().click(function(e) {\n            // If the click wasn't inside the modal element then we should\n            // hide the modal.\n            if (!$(e.target).closest(SELECTORS.MODAL).length) {\n                // The check above fails to detect the click was inside the modal when the DOM tree is already changed.\n                // So, we check if we can still find the container element or not. If not, then the DOM tree is changed.\n                // It's best not to hide the modal in that case.\n                if ($(e.target).closest(SELECTORS.CONTAINER).length) {\n                    var outsideClickEvent = $.Event(ModalEvents.outsideClick);\n                    this.getRoot().trigger(outsideClickEvent, this);\n\n                    if (!outsideClickEvent.isDefaultPrevented()) {\n                        this.hideIfNotForm();\n                    }\n                }\n            }\n        }.bind(this));\n\n        CustomEvents.define(this.getModal(), [CustomEvents.events.activate]);\n        this.getModal().on(CustomEvents.events.activate, SELECTORS.HIDE, function(e, data) {\n            this.hide();\n            data.originalEvent.preventDefault();\n        }.bind(this));\n    };\n\n    /**\n     * Register a listener to close the dialogue when the cancel button is pressed.\n     *\n     * @method registerCloseOnCancel\n     */\n    Modal.prototype.registerCloseOnCancel = function() {\n        // Handle the clicking of the Cancel button.\n        this.getModal().on(CustomEvents.events.activate, this.getActionSelector('cancel'), function(e, data) {\n            var cancelEvent = $.Event(ModalEvents.cancel);\n            this.getRoot().trigger(cancelEvent, this);\n\n            if (!cancelEvent.isDefaultPrevented()) {\n                data.originalEvent.preventDefault();\n\n                if (this.removeOnClose) {\n                    this.destroy();\n                } else {\n                    this.hide();\n                }\n            }\n        }.bind(this));\n    };\n\n    /**\n     * Register a listener to close the dialogue when the save button is pressed.\n     *\n     * @method registerCloseOnSave\n     */\n    Modal.prototype.registerCloseOnSave = function() {\n        // Handle the clicking of the Cancel button.\n        this.getModal().on(CustomEvents.events.activate, this.getActionSelector('save'), function(e, data) {\n            var saveEvent = $.Event(ModalEvents.save);\n            this.getRoot().trigger(saveEvent, this);\n\n            if (!saveEvent.isDefaultPrevented()) {\n                data.originalEvent.preventDefault();\n\n                if (this.removeOnClose) {\n                    this.destroy();\n                } else {\n                    this.hide();\n                }\n            }\n        }.bind(this));\n    };\n\n    /**\n     * Set or resolve and set the value using the function.\n     *\n     * @method asyncSet\n     * @param {(string|object)} value The string or jQuery promise.\n     * @param {function} setFunction The setter\n     * @return {Promise}\n     */\n    Modal.prototype.asyncSet = function(value, setFunction) {\n        var p = value;\n        if (typeof value !== 'object' || !value.hasOwnProperty('then')) {\n            p = $.Deferred();\n            p.resolve(value);\n        }\n\n        p.then(function(content) {\n            setFunction(content);\n\n            return;\n        })\n        .fail(Notification.exception);\n\n        return p;\n    };\n\n    /**\n     * Set the title text of a button.\n     *\n     * This method is overloaded to take either a string value for the button title or a jQuery promise that is resolved with\n     * text most commonly from a Str.get_string call.\n     *\n     * @param {DOMString} action The action of the button\n     * @param {(String|object)} value The button text, or a promise which will resolve to it\n     * @returns {Promise}\n     */\n    Modal.prototype.setButtonText = function(action, value) {\n        const button = this.getFooter().find(this.getActionSelector(action));\n\n        if (!button) {\n            throw new Error(\"Unable to find the '\" + action + \"' button\");\n        }\n\n        return this.asyncSet(value, button.text.bind(button));\n    };\n\n    /**\n     * Get the Selector for an action.\n     *\n     * @param {String} action\n     * @returns {DOMString}\n     */\n    Modal.prototype.getActionSelector = function(action) {\n        return \"[data-action='\" + action + \"']\";\n    };\n\n    /**\n     * Set the flag to remove the modal from the DOM on close.\n     *\n     * @param {Boolean} remove\n     */\n    Modal.prototype.setRemoveOnClose = function(remove) {\n        this.removeOnClose = remove;\n    };\n\n    return Modal;\n});\n"],"file":"modal.min.js"}
>>>>>>> remotes/origin/MOODLE_310_STABLE
